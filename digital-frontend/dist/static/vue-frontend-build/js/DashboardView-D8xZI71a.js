import{_ as k,r as u,o as v,a as o,c as s,t as p,F as w,b,d as r,p as D,e as $,n as y,f as S,g}from"./index-CO7mUaA3.js";const C=n=>(D("data-v-684cfe1b"),n=n(),$(),n),x=C(()=>r("h1",null,"Calendar Data",-1)),I={key:0},N={key:1,class:"error"},B={key:2},E={class:"calendar-item"},F={__name:"DashboardCalendar",setup(n){const i=u(null),t=u(!1),a=u(null),c={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};function h(e){return new Intl.DateTimeFormat("en-US",c).format(new Date(e))}async function l(){t.value=!0;try{const e=await fetch("http://127.0.0.1:8000/api/calendar/");if(!e.ok)throw new Error("Failed to fetch");const d=await e.json();i.value=d[0].google_response.items}catch(e){a.value=e.message}finally{t.value=!1}}return v(()=>{l()}),(e,d)=>(o(),s("div",null,[x,t.value?(o(),s("div",I,"Loading...")):a.value?(o(),s("div",N,p(a.value),1)):(o(),s("div",B,[(o(!0),s(w,null,b(i.value,_=>(o(),s("div",E,[r("h2",null,p(_.summary),1),r("div",null,p(h(_.start.dateTime)),1)]))),256))]))]))}},W=k(F,[["__scopeId","data-v-684cfe1b"]]),f=n=>(D("data-v-82509101"),n=n(),$(),n),L=f(()=>r("h1",null,"Battery State",-1)),T={key:0},j={key:1,class:"error"},H={key:2},O={class:"calendar-item"},U=f(()=>r("div",null,"NOT CONNECTED",-1)),V=f(()=>r("h2",{style:{"border-top":"1px solid #212121","margin-top":"8px","padding-top":"4px"}}," 6 Hours ",-1)),M=f(()=>r("div",null,"For 80% charge",-1)),P={__name:"DashboardBattery",props:{charge:Number,hours:Number},setup(n){const i=u(null),t=u(!1),a=u(null),c=n;async function h(){t.value=!0;try{const l=await fetch("http://127.0.0.1:8000/api/calendar/");if(!l.ok)throw new Error("Failed to fetch");const e=await l.json();i.value=e[0].google_response.items}catch(l){a.value=l.message}finally{t.value=!1}}return v(()=>{h()}),(l,e)=>(o(),s("div",null,[L,t.value?(o(),s("div",T,"Loading...")):a.value?(o(),s("div",j,p(a.value),1)):(o(),s("div",H,[r("div",O,[r("h2",null,p(c.charge),1),U,V,M])]))]))}},z=k(P,[["__scopeId","data-v-82509101"]]),J=r("h1",null,"Charge Moments",-1),R={class:"charge-histogram"},q={class:"charge-histogram-charging-indicator"},A=["onClick"],G={__name:"DashboardHistogram",setup(n){const i=u(10),t=u(!0);function a(e,d){return e==d?"background:red;":e>d?"background: #212121;":"background: #green;"}const c=u([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function h(e){i.value=e}async function l(){t.value=!0;try{const e=await fetch("http://127.0.0.1:8000/api/curve/");if(!e.ok)throw new Error("Failed to fetch");const d=await e.json();c.value=d}catch(e){error.value=e.message}finally{t.value=!1}}return v(()=>{l()}),(e,d)=>(o(),s("div",null,[J,r("div",R,[(o(!0),s(w,null,b(c.value,(_,m)=>(o(),s("div",{class:"price-bar",style:y({height:_+"%"})},null,4))),256))]),r("div",q,[(o(!0),s(w,null,b(c.value,(_,m)=>(o(),s("div",{class:"charge-bar",style:y(a(m,i.value)),onClick:Q=>h(m)},null,12,A))),256))])]))}},K={class:"dashboard-container"},Y={__name:"DashboardView",setup(n){function i(){var a=window.location.protocol==="https:"?"wss:":"ws:",c=window.location.host;(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&(c="localhost:8000");var h="/ws/car/",l=a+"//"+c+h;return new WebSocket(l)}let t=i();return v(()=>{t.onopen=function(){console.log("WebSocket connected.")},t.onmessage=function(a){JSON.parse(a.data),console.log(a.data)},t.onerror=function(a){console.log("WebSocket Error: ",a)},t.onclose=function(a){console.log("WebSocket closed.")}}),S(()=>{t.close()}),(a,c)=>(o(),s("div",K,[g(W,{class:"dashboard-item"}),g(z,{class:"dashboard-item"}),g(G,{class:"dashboard-item"})]))}};export{Y as default};
